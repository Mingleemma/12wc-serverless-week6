<!-- <!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Image Upload & Slider</title>
<style>
  body { font-family: Arial, sans-serif; padding: 20px; }
  .slider { display: flex; gap: 10px; overflow-x: auto; }
  .slider img { width: 200px; height: 200px; object-fit: cover; border: 2px solid #333; border-radius: 8px; }
</style>
</head>
<body>

<h1>Upload Image</h1>
<form id="uploadForm">
  <input type="file" id="imageInput" accept="image/*" required>
  <input type="text" id="textInput" placeholder="Enter text to add">
  <button type="submit">Upload & Process</button>
</form>

<h2>Random Thumbnails</h2>
<div class="slider" id="thumbnailSlider"></div>

<script>
const bucketName = 'your-bucket-name';
const region = 'us-west-2';
const apiEndpoint = 'YOUR_API_GATEWAY_URL';

document.getElementById('uploadForm').addEventListener('submit', async e => {
  e.preventDefault();
  const file = document.getElementById('imageInput').files[0];
  const text = document.getElementById('textInput').value;

  const reader = new FileReader();
  reader.onload = async function() {
    const base64Data = reader.result.split(',')[1];
    const response = await fetch(apiEndpoint, {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ imageBase64: base64Data, filename: file.name, text })
    });
    alert(await response.text());
    loadThumbnails();
  };
  reader.readAsDataURL(file);
});

// Load 5 random thumbnails
async function loadThumbnails() {
  const response = await fetch(`https://${bucketName}.s3.${region}.amazonaws.com/thumbnailimages/`);
  // For simplicity, we assume you list objects via Lambda API or pre-signed URLs
  // We'll mock 5 image URLs:
  const images = [
    `https://${bucketName}.s3.${region}.amazonaws.com/thumbnailimages/image1.png`,
    `https://${bucketName}.s3.${region}.amazonaws.com/thumbnailimages/image2.png`,
    `https://${bucketName}.s3.${region}.amazonaws.com/thumbnailimages/image3.png`,
    `https://${bucketName}.s3.${region}.amazonaws.com/thumbnailimages/image4.png`,
    `https://${bucketName}.s3.${region}.amazonaws.com/thumbnailimages/image5.png`
  ];
  const slider = document.getElementById('thumbnailSlider');
  slider.innerHTML = '';
  images.forEach(url => {
    const img = document.createElement('img');
    img.src = url;
    slider.appendChild(img);
  });
}

loadThumbnails();
</script>
</body>
</html> -->



<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>AI Image Processor</title>
<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
<style>
    body { font-family: 'Roboto', sans-serif; background: #f5f5f5; margin: 0; padding: 0; }
    header { background: #1976d2; color: white; padding: 1rem; text-align: center; }
    main { padding: 2rem; max-width: 900px; margin: auto; }
    .upload-section { display: flex; gap: 1rem; flex-wrap: wrap; }
    input[type="file"] { padding: 0.5rem; }
    input[type="text"] { padding: 0.5rem; flex: 1; min-width: 200px; }
    button { background: #1976d2; color: white; border: none; padding: 0.7rem 1.5rem; cursor: pointer; border-radius: 5px; }
    button:hover { background: #115293; }
    .slider { display: flex; overflow-x: auto; gap: 1rem; margin-top: 2rem; padding-bottom: 1rem; }
    .slider img { border-radius: 10px; height: 150px; object-fit: cover; cursor: pointer; transition: transform 0.3s; }
    .slider img:hover { transform: scale(1.05); }
</style>
</head>
<body>
<header>
    <h1>AI Image Processor</h1>
</header>
<main>
    <div class="upload-section">
        <input type="file" id="imageInput">
        <input type="text" id="imageText" placeholder="Enter text to add">
        <button onclick="uploadImage()">Upload & Process</button>
    </div>

    <div class="slider" id="thumbnailSlider">
        <!-- Random thumbnails from S3 will appear here -->
    </div>
</main>

<script>
const bucketName = 'your-bucket-name';
const region = 'your-region';
const lambdaEndpoint = 'your-lambda-api-endpoint';

async function uploadImage() {
    const file = document.getElementById('imageInput').files[0];
    const text = document.getElementById('imageText').value || 'AI Generated';
    if(!file) { alert('Select an image'); return; }

    const reader = new FileReader();
    reader.onload = async function(e) {
        const base64Data = e.target.result.split(',')[1];

        const response = await fetch(lambdaEndpoint, {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({
                filename: file.name,
                image_base64: base64Data,
                text: text
            })
        });

        const result = await response.json();
        alert(result.body);
        loadThumbnails();
    }
    reader.readAsDataURL(file);
}

async function loadThumbnails() {
    const s3 = new AWS.S3({ region: region });
    const data = await s3.listObjectsV2({ Bucket: bucketName, Prefix: 'thumbnailimages/' }).promise();
    const slider = document.getElementById('thumbnailSlider');
    slider.innerHTML = '';

    // Random 5 thumbnails
    const thumbnails = data.Contents.sort(() => 0.5 - Math.random()).slice(0, 5);
    thumbnails.forEach(obj => {
        const img = document.createElement('img');
        img.src = `https://${bucketName}.s3.${region}.amazonaws.com/${obj.Key}`;
        slider.appendChild(img);
    });
}

// Initial load
loadThumbnails();
</script>
<script src="https://sdk.amazonaws.com/js/aws-sdk-2.1197.0.min.js"></script>
</body>
</html>